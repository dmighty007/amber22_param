#!/bin/csh -f

# the mol2 file was generated by antechamber using the HF/6-31G* optimized geometry

"$AMBERHOME/bin/antechamber" -i me3nh.mol2 -fi mol2 -o me3nh.prepi -fo prepi >& antechamber.out || goto error
"$AMBERHOME/bin/parmchk" -i me3nh.prepi -f prepi -o me3nh.frcmod || goto error
"$AMBERHOME/bin/tleap" -s -f leap.in > leap.out

"$AMBERHOME/bin/antechamber" -i me3nh.mol2 -fi mol2 -o me3nh_gaff2.prepi -fo prepi -at gaff2 >& antechamber.out || goto error
"$AMBERHOME/bin/parmchk2" -i me3nh_gaff2.prepi -f prepi -o me3nh_gaff2.frcmod || goto error
"$AMBERHOME/bin/tleap" -s -f leap_gaff2.in > leap_gaff2.out

../../dacdif -a 5.5e-3 me3nh.prepi.save me3nh.prepi
../../dacdif -a 5.5e-3 me3nh_gaff2.prepi.save me3nh_gaff2.prepi
../../dacdif -a 5.5e-3 me3nh.frcmod.save me3nh.frcmod
../../dacdif -a 5.5e-3 me3nh_gaff2.frcmod.save me3nh_gaff2.frcmod

/bin/rm -f ANTE* ATOMTYPE.INF NEWPDB.PDB PREP.INF \
      antechamber.out 
exit(0)

error:
echo "  ${0}:  Program error"
exit(1)
