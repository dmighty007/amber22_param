#!/bin/csh -f

# "The Mulliken charges were generated by mopac in amber10; 
#  you may get different result if different QM program is applied"

"$AMBERHOME/bin/antechamber" -i tp.pdb -fi pdb -o tp.mol2 -fo mol2 -c bcc \
   -ek "qm_theory='AM1', grms_tol=0.0005, ndiis_attempts=700, scfconv=1.d-10, diag_routine=3" \
   >& antechamber.out || goto error

"$AMBERHOME/bin/parmchk2" -s 1 -i tp.mol2 -f mol2 -o frcmod || goto error
"$AMBERHOME/bin/parmchk2" -s 1 -i tp.mol2 -f mol2 -o frcmod.full -a Y || goto error

# "$AMBERHOME/bin/tleap" -s -f leap.in > leap.out

../../dacdif -r 1.e-3 tp.mol2.save tp.mol2
#../../dacdif -a 1.e-2 sqm.pdb.save sqm.pdb
../../dacdif antechamber.out.save antechamber.out
../../dacdif frcmod.save frcmod
../../dacdif frcmod.full.save frcmod.full
# ../../dacdif -t 2 prmtop.save prmtop

/bin/rm -f ANTE* ATOMTYPE.INF BCCTYPE.INF for* FOR* NEWPDB.PDB PREP.INF \
      prmcrd divcon.in divcon.rst divcon.dmx leap.log leap.out
exit(0)

error:
echo "  ${0}:  Program error"
exit(1)
