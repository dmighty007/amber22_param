
# buildfile for the memembed executable, part of packmol_memgen

set(MEMEMBED_SOURCES
	src/pdb.cpp
	src/ga.cpp
	src/direct.cpp
	src/grid.cpp
	src/main.cpp)
	
# --------------------------------------------------------------------

# should probably be built optimized
add_compile_options(${OPT_CXXFLAGS})
include_directories(src)

# --------------------------------------------------------------------

add_executable(memembed ${MEMEMBED_SOURCES})
target_link_libraries(memembed boost_thread Threads::Threads boost_system)

# copy memembed back to the source directory so that packmol_memgen can include it in its package
add_custom_command(TARGET memembed
	POST_BUILD
	COMMAND ${CMAKE_COMMAND} -E copy $<TARGET_FILE:memembed> ${CMAKE_CURRENT_SOURCE_DIR}/bin
	VERBATIM)

# Installation directive
install (TARGETS memembed DESTINATION ${BINDIR})

